import{j as e}from"./ui-vendor-D57amxQA.js";import{r,u as Z}from"./react-vendor-oV3x6oea.js";import{T as ee,B as I,H as se,g as B,c as V,b as te}from"./game-memory-DPb6ehu5.js";const re=1,ae=1e6;let P=0;function le(){return P=(P+1)%Number.MAX_SAFE_INTEGER,P.toString()}const G=new Map,z=s=>{if(G.has(s))return;const a=setTimeout(()=>{G.delete(s),C({type:"REMOVE_TOAST",toastId:s})},ae);G.set(s,a)},ne=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,re)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?z(t):s.toasts.forEach(l=>{z(l.id)}),{...s,toasts:s.toasts.map(l=>l.id===t||t===void 0?{...l,open:!1}:l)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},O=[];let R={toasts:[]};function C(s){R=ne(R,s),O.forEach(a=>{a(R)})}function ce({...s}){const a=le(),t=o=>C({type:"UPDATE_TOAST",toast:{...o,id:a}}),l=()=>C({type:"DISMISS_TOAST",toastId:a});return C({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:o=>{o||l()}}}),{id:a,dismiss:l,update:t}}function ie(){const[s,a]=r.useState(R);return r.useEffect(()=>(O.push(a),()=>{const t=O.indexOf(a);t>-1&&O.splice(t,1)}),[s]),{...s,toast:ce,dismiss:t=>C({type:"DISMISS_TOAST",toastId:t})}}const D=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"),Q=()=>{const s=navigator.userAgent||navigator.vendor||window.opera,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(s),l="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,o=window.innerWidth<1024||window.screen.width<1024;return t||l&&o};function X(){const[s,a]=r.useState(()=>Q());return r.useEffect(()=>{const t=()=>{a(Q())};return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),s}const U=({speed:s,onCorrect:a,onIncorrect:t,gameActive:l,difficulty:o})=>{const[d,p]=r.useState("green"),[w,b]=r.useState(["green","blue"]),n=r.useRef(null),u=X(),m={green:"#22c55e",blue:"#3b82f6",red:"#ef4444"},y={green:"Ð—ÐµÐ»ÐµÐ½Ð¾",blue:"Ð¡Ð¸Ð½ÑŒÐ¾",red:"Ð§ÐµÑ€Ð²ÐµÐ½Ð¾"},N=()=>o==="hard"?["green","blue","red"]:["green","blue"],f=r.useCallback(()=>{const i=N(),j=i[Math.floor(Math.random()*i.length)],x=[...i].sort(()=>Math.random()-.5);p(j),b(x)},[o]),h=r.useCallback(()=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{l&&(f(),h())},s)},[s,l,f]);r.useEffect(()=>(l?(f(),h()):n.current&&(clearTimeout(n.current),n.current=null),()=>{n.current&&(clearTimeout(n.current),n.current=null)}),[l,s,f,h]);const T=r.useCallback(i=>{l&&(n.current&&(clearTimeout(n.current),n.current=null),i===d?a():t(),f(),h())},[l,d,a,t,f,h]),S=o==="hard"?"grid-cols-3":"grid-cols-2";return e.jsxs("div",{className:`flex flex-col items-center w-full ${u?"max-w-sm":"max-w-2xl"}`,children:[e.jsx("div",{className:`w-full bg-white rounded-2xl shadow-lg flex items-center justify-center ${u?"p-4 mb-4":"p-8 mb-8"}`,children:e.jsx("div",{className:`rounded-2xl flex items-center justify-center text-white font-bold transition-all ${u?"w-32 h-32 text-lg":"w-40 h-40 text-2xl"}`,style:{backgroundColor:m[d],boxShadow:`0 10px 15px -3px ${m[d]}40`},children:y[d]})}),e.jsx("div",{className:`grid ${S} w-full ${u?"gap-4":"gap-8"}`,children:w.map((i,j)=>e.jsx("button",{onClick:()=>T(i),className:`aspect-square rounded-3xl shadow-lg transform transition-all hover:scale-105 active:scale-95 focus:outline-none ${u?"touch-manipulation":""}`,style:{backgroundColor:m[i],boxShadow:`0 10px 15px -3px ${m[i]}40`},disabled:!l},j))})]})},oe=({correctAnswers:s,wrongAnswers:a,totalAttempts:t,timeSpent:l,onPlayAgain:o})=>{const d=Z(),p=b=>{const n=Math.floor(b/60),u=b%60;return`${n}:${u.toString().padStart(2,"0")}`},w=localStorage.getItem("currentPlayerName")||"Ð˜Ð³Ñ€Ð°Ñ‡";return e.jsx("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto py-12",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 text-center max-w-md w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(ee,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsxs("h2",{className:"text-3xl font-bold text-green-600 mb-2",children:["Ð‘Ñ€Ð°Ð²Ð¾, ",w,"!"]}),e.jsx("p",{className:"text-lg text-gray-700 mb-4",children:"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð½Ð°Ñ‚Ð° Ð¸Ð³Ñ€Ð°!"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Ð’Ñ€ÐµÐ¼Ðµ:"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:p(l)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"ÐžÐ±Ñ‰Ð¾ Ð¾Ð¿Ð¸Ñ‚Ð¸:"}),e.jsx("div",{className:"text-xl font-bold text-green-600",children:t})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-green-600",children:"Ð’ÐµÑ€Ð½Ð¸:"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:s})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-red-600",children:"Ð“Ñ€ÐµÑˆÐ½Ð¸:"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:a})]})]})]})]}),e.jsxs(I,{onClick:()=>{D()?o():d("/")},variant:"outline",className:"w-full",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),D()?"Ð˜Ð³Ñ€Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾":"ÐšÑŠÐ¼ Ð½Ð°Ñ‡Ð°Ð»Ð¾Ñ‚Ð¾"]})]})})},de=({label:s="",seconds:a,hasStarted:t})=>{const l=Math.floor(a/60).toString().padStart(2,"0"),o=(a%60).toString().padStart(2,"0");return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-center text-sm text-gray-600 mb-2",children:s}),e.jsxs("div",{className:"relative mx-auto w-36 h-36",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-12 h-6 bg-gray-300 rounded-t-xl shadow"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-b from-slate-50 to-slate-200 border-4 border-slate-300 shadow-xl"}),e.jsx("div",{className:"absolute inset-2 rounded-full bg-white shadow-inner"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-2xl font-bold tabular-nums tracking-wider",children:t?`${l}:${o}`:"00:00"})}),e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 w-1 h-3 bg-slate-400 rounded"}),e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 w-1 h-3 bg-slate-400 rounded"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-3 w-3 h-1 bg-slate-400 rounded"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-3 w-3 h-1 bg-slate-400 rounded"})]})]})},he=({level:s,onComplete:a,onTimeUp:t,onBackToSelection:l,onGameStateChange:o})=>{const[d,p]=r.useState(null),[w,b]=r.useState(!1),[n,u]=r.useState(!1),[m,y]=r.useState(0),[N,f]=r.useState(0),[h,T]=r.useState(0),[E,S]=r.useState(0),i=r.useRef(null),{toast:j}=ie(),x=X(),L=D(),[M,Y]=r.useState(60),[_,J]=r.useState(1),g=r.useRef(null),v=r.useRef(null),W=Math.round(_*1e3),F=r.useCallback(()=>{b(!0),y(0),f(0),T(0),S(0),i.current&&clearInterval(i.current),v.current=Date.now(),i.current=setInterval(()=>{if(v.current!==null){const c=Math.floor((Date.now()-v.current)/1e3);y(c)}},200),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{var c;typeof t=="function"&&t(),(c=k.current)==null||c.call(k)},M*1e3)},[M,t]),A=r.useCallback(async()=>{if(i.current&&clearInterval(i.current),g.current&&(clearTimeout(g.current),g.current=null),v.current!==null){const c=Math.floor((Date.now()-v.current)/1e3);y(c)}if(v.current=null,u(!0),B.isSinglePlayerMode()&&!D())try{await B.submitSpeedGameStats({correctAnswers:N,wrongAnswers:h,timeElapsed:m}),console.log("Stats submitted via Complete Game button")}catch(c){console.error("Failed to submit stats:",c)}a()},[a,N,h,m]),k=r.useRef(A);r.useEffect(()=>{k.current=A},[A]);const H=r.useCallback(()=>{f(c=>c+1),S(c=>c+1),j({title:"ÐŸÑ€Ð°Ð²Ð¸Ð»ÐµÐ½ Ð¾Ñ‚Ð³Ð¾Ð²Ð¾Ñ€!",description:"Ð‘Ñ€Ð°Ð²Ð¾!",duration:1e3})},[j]),q=r.useCallback(()=>{T(c=>c+1),S(c=>c+1),j({title:"Ð“Ñ€ÐµÑˆÐµÐ½ Ð¾Ñ‚Ð³Ð¾Ð²Ð¾Ñ€!",description:"ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¾Ñ‚Ð½Ð¾Ð²Ð¾!",variant:"destructive",duration:1e3})},[j]),K=r.useCallback(()=>{u(!1),b(!1)},[]),$=r.useCallback(()=>{if(i.current&&clearInterval(i.current),g.current&&clearTimeout(g.current),v.current=null,L&&l){l();return}p(null),b(!1),u(!1),y(0),f(0),T(0),S(0)},[L,l]);return r.useCallback(()=>{$()},[$]),r.useEffect(()=>()=>{i.current&&clearInterval(i.current),g.current&&clearTimeout(g.current),v.current=null},[]),r.useEffect(()=>{d&&!w&&!n&&F()},[d,w,n,F]),r.useEffect(()=>{o&&o(!d)},[d,o]),n?e.jsx(oe,{correctAnswers:N,wrongAnswers:h,totalAttempts:E,timeSpent:m,onPlayAgain:K}):d?x?e.jsxs("div",{className:"flex flex-col w-full h-full",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-green-600",children:N}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ð’ÐµÑ€Ð½Ð¸"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-red-600",children:h}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ð“Ñ€ÐµÑˆÐ½Ð¸"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:E}),e.jsx("div",{className:"text-xs text-gray-500",children:"ÐžÐ±Ñ‰Ð¾"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-lg",children:[Math.floor(m/60).toString().padStart(2,"0"),":",(m%60).toString().padStart(2,"0")]}),e.jsx("div",{className:"text-xs text-gray-500",children:d==="slow"?"Ð‘Ð°Ð²Ð½Ð¾":"Ð‘ÑŠÑ€Ð·Ð¾"})]})]})}),e.jsx("div",{className:"flex-1 bg-white rounded-lg shadow-md p-4",children:e.jsx("div",{className:"flex justify-center h-full",children:e.jsx(U,{speed:W,onCorrect:H,onIncorrect:q,gameActive:!n,difficulty:d==="slow"?"easy":"hard"})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 mt-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"outline",onClick:$,className:"flex-1",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"ÐžÑ‚Ð½Ð°Ñ‡Ð°Ð»Ð¾"]}),e.jsxs(I,{variant:"outline",onClick:A,className:"flex-1 bg-green-100 hover:bg-green-200 border-green-300 text-green-700",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Ð—Ð°Ð²ÑŠÑ€ÑˆÐ¸"]})]})})]}):e.jsxs("div",{className:"flex w-full gap-4 items-start -mx-4",children:[e.jsx("aside",{className:"w-[220px] shrink-0 pl-4",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-4 mb-4",children:e.jsx(de,{seconds:m,hasStarted:w})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-6 mb-4",children:e.jsxs("div",{className:"space-y-4 text-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ð’ÐµÑ€Ð½Ð¸"}),e.jsx("span",{className:"font-semibold",children:N})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ð“Ñ€ÐµÑˆÐ½Ð¸"}),e.jsx("span",{className:"font-semibold",children:h})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ÐžÐ±Ñ‰Ð¾"}),e.jsx("span",{className:"font-semibold",children:E})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚"}),e.jsx("span",{className:"font-semibold",children:d==="slow"?"Ð‘Ð°Ð²Ð½Ð¾":"Ð‘ÑŠÑ€Ð·Ð¾"})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-3 space-y-2",children:e.jsxs(I,{variant:"outline",onClick:$,className:"w-full",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð¾Ñ‚Ð½Ð°Ñ‡Ð°Ð»Ð¾"]})})]})}),e.jsx("div",{className:"flex-1 flex flex-col items-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 w-full",children:[e.jsx("div",{className:"text-center mb-6"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(U,{speed:W,onCorrect:H,onIncorrect:q,gameActive:!n,difficulty:d==="slow"?"easy":"hard"})})]})})]}):e.jsx("div",{className:`flex flex-col items-center justify-center w-full ${x?"py-4 px-4":"max-w-4xl mx-auto py-12"}`,children:e.jsxs("div",{className:`bg-white rounded-lg shadow-xl text-center w-full ${x?"p-4":"p-8 max-w-2xl"}`,children:[e.jsx("h2",{className:`font-bold text-gray-800 mb-6 ${x?"text-xl":"text-3xl"}`,children:"Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚"}),e.jsxs("div",{className:`grid gap-6 ${x?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:[e.jsxs("button",{onClick:()=>p("slow"),className:`flex flex-col items-center rounded-xl border-2 border-gray-200 hover:border-gray-400 hover:bg-gray-50 transition-all duration-200 transform hover:scale-105 ${x?"p-4":"p-6"}`,children:[e.jsx("div",{className:`mb-4 p-3 rounded-lg ${x?"text-3xl":"text-4xl"}`,style:{backgroundColor:"#10B98120"},children:"ðŸŒ"}),e.jsx("span",{className:`font-semibold text-gray-800 ${x?"text-lg":"text-xl"}`,children:"Ð‘Ð°Ð²Ð½Ð¾"})]}),e.jsxs("button",{onClick:()=>p("fast"),className:`flex flex-col items-center rounded-xl border-2 border-gray-200 hover:border-gray-400 hover:bg-gray-50 transition-all duration-200 transform hover:scale-105 ${x?"p-4":"p-6"}`,children:[e.jsx("div",{className:`mb-4 p-3 rounded-lg ${x?"text-3xl":"text-4xl"}`,style:{backgroundColor:"#EF444420"},children:"ðŸš€"}),e.jsx("span",{className:`font-semibold text-gray-800 ${x?"text-lg":"text-xl"}`,children:"Ð‘ÑŠÑ€Ð·Ð¾"})]})]}),e.jsxs("div",{className:"mt-8 space-y-6 text-left",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ÐŸÑ€Ð¾Ð´ÑŠÐ»Ð¶Ð¸Ñ‚ÐµÐ»Ð½Ð¾ÑÑ‚: ",e.jsxs("span",{className:"font-semibold",children:[M," ÑÐµÐº"]})]}),e.jsx("input",{type:"range",min:30,max:90,step:5,value:M,onChange:c=>Y(Number(c.target.value)),className:"w-full accent-green-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"30s"}),e.jsx("span",{children:"90s"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ Ð½Ð° ÑÐ¼ÑÐ½Ð°: ",e.jsxs("span",{className:"font-semibold",children:[_.toFixed(1)," ÑÐµÐº"]})]}),e.jsx("input",{type:"range",min:.5,max:1.5,step:.1,value:_,onChange:c=>J(Number(c.target.value)),className:"w-full accent-green-600"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0.5s"}),e.jsx("span",{children:"1.5s"})]})]})]})]})})};export{he as S,D as a,Q as i,ie as u};
