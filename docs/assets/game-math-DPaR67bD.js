import{j as e}from"./ui-vendor-D57amxQA.js";import{u as Se,r as A}from"./react-vendor-oV3x6oea.js";import{u as $e,a as Ce,T as Ee,B as ae,H as Pe,b as ge,c as Ae,X as De}from"./game-memory-DPb6ehu5.js";const W=o=>{switch(o){case"×":return"*";case"÷":return"/";default:return o}},fe=(o,x,a,c,i)=>{if(c===void 0||i===void 0)switch(W(x)){case"+":return o+a;case"-":return o-a;case"*":return o*a;case"/":return o/a;default:return 0}const y=W(x),m=W(c);if((m==="*"||m==="/")&&(y==="+"||y==="-")){let j;switch(m){case"*":j=a*i;break;case"/":j=a/i;break;default:j=a}switch(y){case"+":return o+j;case"-":return o-j;default:return 0}}else{let j;switch(y){case"+":j=o+a;break;case"-":j=o-a;break;case"*":j=o*a;break;case"/":j=o/a;break;default:j=o}switch(m){case"+":return j+i;case"-":return j-i;case"*":return j*i;case"/":return j/i;default:return j}}},Te=(o,x,a,c,i,y,m)=>{const j=[W(x),W(c),W(y)];let C=[...[o,a,i,m]],E=[...j];for(let h=0;h<E.length;h++)if(E[h]==="*"||E[h]==="/"){let k;E[h]==="*"?k=C[h]*C[h+1]:k=C[h]/C[h+1],C.splice(h,2,k),E.splice(h,1),h--}for(let h=0;h<E.length;h++){let k;E[h]==="+"?k=C[h]+C[h+1]:k=C[h]-C[h+1],C.splice(h,2,k),E.splice(h,1),h--}return C[0]},ze=o=>{const x={addition:"+",subtraction:"-",multiplication:"×",division:"÷"},a=o.map(c=>x[c]).filter(Boolean);return a.length>0?a:["+"]},Me=o=>{const x=[];for(let a=1;a<=9;a++)for(let c=1;c<=9;c++){let i=0;switch(o){case"+":i=a+c;break;case"-":i=a-c;break;case"×":i=a*c;break;case"÷":c!==0&&a%c===0?i=a/c:i=-1;break;default:i=a+c}i>=0&&i<=9&&Number.isInteger(i)&&(o!=="÷"||c>=2&&i>=1)&&x.push({A:a,B:c,R:i})}return x},Re=(o,x)=>{const a=x.op?[x.op]:o.slice().sort(()=>Math.random()-.5);for(const c of a){const i=Me(c).filter(y=>(x.A===void 0||y.A===x.A)&&(x.B===void 0||y.B===x.B)&&(x.R===void 0||y.R===x.R));if(i.length>0)return{...i[Math.floor(Math.random()*i.length)],op:c}}return null},pe=[{size:5,lines:[{r:0,c:0,dir:"h"},{r:2,c:0,dir:"h"},{r:4,c:0,dir:"h"},{r:0,c:0,dir:"v"}]},{size:5,lines:[{r:0,c:0,dir:"h"},{r:0,c:2,dir:"v"},{r:2,c:0,dir:"h"}]},{size:5,lines:[{r:0,c:0,dir:"h"},{r:0,c:0,dir:"v"},{r:4,c:0,dir:"h"}]},{size:5,lines:[{r:0,c:0,dir:"h"},{r:4,c:0,dir:"h"},{r:0,c:4,dir:"v"}]},{size:5,lines:[{r:1,c:0,dir:"h"},{r:3,c:0,dir:"h"},{r:0,c:2,dir:"v"}]}],xe=o=>{const x=[];for(let a=0;a<5;a++){const c=o.dir==="h"?o.r:o.r+a,i=o.dir==="h"?o.c+a:o.c,y=a===1?"operator":a===3?"equals":"number";x.push({r:c,c:i,kind:y,idx:a})}return x},be=(o,x="medium")=>{const a=ze(o),c=pe[Math.floor(Math.random()*pe.length)],i=c.size,y=Array.from({length:i},(n,d)=>Array.from({length:i},(f,I)=>({id:`cell_${d}_${I}`,row:d,col:I,kind:"empty"}))),m={},j=(n,d,f,I)=>{y[n][d]={id:`cell_${n}_${d}`,row:n,col:d,kind:"fixed",type:I,value:f},m[`${n},${d}`]={type:I,value:f}},D=(n,d,f,I)=>{y[n][d]={id:`cell_${n}_${d}`,row:n,col:d,kind:"blank",type:I,correctValue:f},m[`${n},${d}`]={type:I,value:f}},C=()=>{for(let n=0;n<i;n++)for(let d=0;d<i;d++)y[n][d]={id:`cell_${n}_${d}`,row:n,col:d,kind:"empty"};for(const n in m)delete m[n];for(const n of c.lines){const d=xe(n),f={},I=d[1],z=m[`${I.r},${I.c}`];z&&z.type==="operator"&&(f.op=z.value);const P=d[0],U=m[`${P.r},${P.c}`];U&&U.type==="number"&&(f.A=parseInt(U.value));const N=d[2],B=m[`${N.r},${N.c}`];B&&B.type==="number"&&(f.B=parseInt(B.value));const re=d[4],_=m[`${re.r},${re.c}`];_&&_.type==="number"&&(f.R=parseInt(_.value));const O=Re(a,f);if(!O)return!1;const K=[{type:"number",value:String(O.A)},{type:"operator",value:O.op},{type:"number",value:String(O.B)},{type:"equals",value:"="},{type:"number",value:String(O.R)}];for(let L=0;L<5;L++){const{r:F,c:H,kind:ne}=d[L],V=K[L],X=m[`${F},${H}`];if(X){if(X.type!==V.type||X.value!==V.value)return!1;continue}ne==="equals"?j(F,H,V.value,"equals"):D(F,H,V.value,V.type)}}return!0};let E=0;for(;E<50&&!C();)E++;for(const n of c.lines){const d=xe(n),I=[0,2,4].filter(z=>{const P=y[d[z].r][d[z].c];return P.kind==="blank"&&P.correctValue&&d[z].kind==="number"});if(I.length>0){const z=I[Math.floor(Math.random()*I.length)],P=d[z],U=y[P.r][P.c];y[P.r][P.c]={id:U.id,row:P.r,col:P.c,kind:"fixed",type:"number",value:U.correctValue}}}const h=[],k=new Map;for(let n=0;n<i;n++)for(let d=0;d<i;d++){const f=y[n][d];if(f.kind==="blank"&&f.correctValue&&f.type){h.push({id:f.id,position:0,correctValue:f.correctValue,type:f.type});const I=k.get(f.correctValue)||0;k.set(f.correctValue,I+1)}}const M=[];k.forEach((n,d)=>{for(let f=0;f<n;f++)M.push(d)});const q=new Set,se=n=>{[n-1,n+1,n-2,n+2].forEach(f=>{f>=1&&f<=9&&q.add(String(f))})};return h.forEach(n=>{n.type==="number"&&se(parseInt(n.correctValue))}),q.forEach(n=>{k.has(n)||M.push(n)}),a.forEach(n=>M.push(n)),M.sort(()=>Math.random()-.5),{mode:"grid",grid:y,blanks:h,options:M,correctAnswer:0}},Ue=({label:o="",seconds:x,hasStarted:a})=>{const c=Math.floor(x/60).toString().padStart(2,"0"),i=(x%60).toString().padStart(2,"0");return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-center text-sm text-gray-600 mb-2",children:o}),e.jsxs("div",{className:"relative mx-auto w-36 h-36",children:[e.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-12 h-6 bg-gray-300 rounded-t-xl shadow"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-b from-slate-50 to-slate-200 border-4 border-slate-300 shadow-xl"}),e.jsx("div",{className:"absolute inset-2 rounded-full bg-white shadow-inner"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-2xl font-bold tabular-nums tracking-wider",children:a?`${c}:${i}`:"00:00"})}),e.jsx("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 w-1 h-3 bg-slate-400 rounded"}),e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 w-1 h-3 bg-slate-400 rounded"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-3 w-3 h-1 bg-slate-400 rounded"}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-3 w-3 h-1 bg-slate-400 rounded"})]})]})},qe=({level:o,onComplete:x,onTimeUp:a,currentTeam:c,onPlayerTurn:i})=>{var he;const y=Se(),[m,j]=A.useState([]),[D,C]=A.useState(0),[E,h]=A.useState([]),[k,M]=A.useState({}),[q,se]=A.useState(0),[T,n]=A.useState(null),[d,f]=A.useState(null),[I,z]=A.useState(!1),[P,U]=A.useState(0),[N,B]=A.useState({isDragging:!1,draggedItemId:null,startPosition:null,currentPosition:null,draggedElement:null}),re=A.useRef(null),_=A.useRef({}),{timeLeft:O,hasStarted:K,showTimeUpScreen:L,startTimer:F,stopTimer:H,resetTimer:ne}=$e({enabled:!0});A.useEffect(()=>{const t=o.themeId.split(",").map(r=>r.trim()),g=Array.from({length:8},()=>be(t,o.difficultyId));j(g)},[o.themeId,o.difficultyId]),A.useEffect(()=>{if(m.length>0&&D<m.length){const s=m[D].options.map((g,r)=>({id:`option_${r}`,value:g,isUsed:!1}));h(s),M({}),n(null)}},[m,D]),A.useEffect(()=>{m.length>0&&D>=m.length&&!I&&(console.log("Game completed! Current index:",D,"Problems length:",m.length),H(),c?x():z(!0))},[D,m.length,I,c,x,H]);const V=(t,s)=>{f(s),t.dataTransfer.setData("text/plain",s),K||F()},X=t=>{t.preventDefault()},le=(t,s)=>{t.preventDefault();const g=t.dataTransfer.getData("text/plain"),r=E.find(l=>l.id===g);if(r&&!r.isUsed){const l=k[s];l&&h(v=>v.map(p=>p.value===l?{...p,isUsed:!1}:p)),M(v=>({...v,[s]:r.value})),h(v=>v.map(p=>p.id===g?{...p,isUsed:!0}:p))}f(null)},oe=(t,s)=>{t.preventDefault();const g=t.touches[0],r=t.currentTarget;B({isDragging:!0,draggedItemId:s,startPosition:{x:g.clientX,y:g.clientY},currentPosition:{x:g.clientX,y:g.clientY},draggedElement:r}),f(s),K||F(),r.style.transform="scale(1.1)",r.style.zIndex="1000",r.style.pointerEvents="none"},ie=t=>{if(t.preventDefault(),!N.isDragging||!N.draggedElement)return;const s=t.touches[0],g={x:s.clientX,y:s.clientY};if(B(l=>({...l,currentPosition:g})),N.startPosition){const l=g.x-N.startPosition.x,v=g.y-N.startPosition.y;N.draggedElement.style.transform=`translate(${l}px, ${v}px) scale(1.1)`}const r=document.elementFromPoint(s.clientX,s.clientY);if(Object.values(_.current).forEach(l=>{l&&l.classList.remove("touch-hover","touch-hover-operator")}),r){const l=r.closest("[data-drop-zone]");l&&(l.getAttribute("data-blank-type")==="operator"?l.classList.add("touch-hover-operator"):l.classList.add("touch-hover"))}},ce=t=>{if(t.preventDefault(),!N.isDragging||!N.currentPosition||!N.draggedElement){de();return}const s=document.elementFromPoint(N.currentPosition.x,N.currentPosition.y),g=s==null?void 0:s.closest("[data-drop-zone]");if(g&&N.draggedItemId){const r=g.getAttribute("data-drop-zone"),l=E.find(v=>v.id===N.draggedItemId);if(l&&!l.isUsed&&r){const v=k[r];v&&h(p=>p.map(w=>w.value===v?{...w,isUsed:!1}:w)),M(p=>({...p,[r]:l.value})),h(p=>p.map(w=>w.id===N.draggedItemId?{...w,isUsed:!0}:w)),g.classList.add("drop-success"),setTimeout(()=>{g.classList.remove("drop-success")},300)}}de()},de=()=>{N.draggedElement&&(N.draggedElement.style.transform="",N.draggedElement.style.zIndex="",N.draggedElement.style.pointerEvents=""),Object.values(_.current).forEach(t=>{t&&t.classList.remove("touch-hover","touch-hover-operator","drop-success")}),B({isDragging:!1,draggedItemId:null,startPosition:null,currentPosition:null,draggedElement:null}),f(null)},ue=t=>{const s=k[t];s&&(h(g=>g.map(r=>r.value===s?{...r,isUsed:!1}:r)),M(g=>{const r={...g};return delete r[t],r}))},ve=()=>{var r;if(m.length===0||D>=m.length)return;const t=m[D];let s=!0;const g=l=>l==="×"?"*":l==="÷"?"/":l;if(t.mode==="grid"&&t.grid){const l=t.grid.length,v=((r=t.grid[0])==null?void 0:r.length)||0,p=(b,u)=>{const $=t.grid[b][u];if($.kind==="fixed")return{type:$.type||"number",value:$.value||""};if($.kind==="blank"){const S=k[$.id];return S?{type:$.type||"number",value:S}:null}return null},w=b=>{const u=b.map(({r:te,c:Ie})=>p(te,Ie));if(u.some(te=>te===null))return!1;const[$,S,G,Z,J]=u;if(Z.type!=="equals")return!1;const Q=parseInt($.value,10),Y=parseInt(G.value,10),ee=parseInt(J.value,10),ke=g(S.value);if([Q,Y,ee].some(te=>Number.isNaN(te)))return!1;switch(ke){case"+":return Q+Y===ee;case"-":return Q-Y===ee;case"*":return Q*Y===ee;case"/":return Y!==0&&Q/Y===ee;default:return!1}};e:for(let b=0;b<l;b++)for(let u=0;u<v;u++){const $=t.grid[b][u];if($.kind==="fixed"&&$.type==="equals"){if(u-3>=0&&u+1<v){const S=[{r:b,c:u-3},{r:b,c:u-2},{r:b,c:u-1},{r:b,c:u},{r:b,c:u+1}];if(S.every(({r:Z,c:J})=>t.grid[Z][J].kind!=="empty")&&!w(S)){s=!1;break e}}if(b-3>=0&&b+1<l){const S=[{r:b-3,c:u},{r:b-2,c:u},{r:b-1,c:u},{r:b,c:u},{r:b+1,c:u}];if(S.every(({r:Z,c:J})=>t.grid[Z][J].kind!=="empty")&&!w(S)){s=!1;break e}}}}}else{const v=(t.equation||"").trim().split(/\s+/).map(w=>{const b=w.match(/^BLANK_(\d+)$/);if(b){const u=`blank_${b[1]}`;return k[u]||""}return w}),p=v.indexOf("=");if(p===-1)s=!1;else{const w=v.slice(0,p),b=parseInt(v[p+1],10),u=[],$=[];for(let S=0;S<w.length;S++)if(S%2===0){const G=parseInt(w[S],10);if(Number.isNaN(G)){s=!1;break}u.push(G)}else $.push(w[S]);if(s){let S=0;u.length===2?S=fe(u[0],$[0],u[1]):u.length===3?S=fe(u[0],$[0],u[1],$[1],u[2]):u.length===4?S=Te(u[0],$[0],u[1],$[1],u[2],$[2],u[3]):s=!1,s&&(s=S===b)}}}n(s?"correct":"incorrect"),s&&se(l=>l+1),setTimeout(()=>{if(C(l=>l+1),c&&i&&s){const l=(P+1)%c.players.length;U(l),i(c.players[l].id)}},1500)},ye=(t,s)=>{let g=t.split(/BLANK_\d+/),r=[];return g.forEach((l,v)=>{if(r.push(e.jsx("span",{children:l},`part_${v}`)),v<s.length){const p=s[v],w=k[p.id];r.push(e.jsx("div",{ref:b=>{_.current[p.id]=b},"data-drop-zone":p.id,"data-blank-type":p.type,className:`relative inline-flex items-center justify-center w-16 h-12 mx-1 border-2 border-dashed rounded-md transition-all touch-drop-zone align-middle ${w?T==="correct"?"bg-green-100 border-green-400":T==="incorrect"?"bg-red-100 border-red-400":p.type==="operator"?"bg-orange-100 border-orange-400 cursor-pointer":"bg-blue-100 border-blue-400 cursor-pointer":p.type==="operator"?"border-orange-400 bg-orange-50":"border-gray-400 bg-gray-50"}`,onDragOver:X,onDrop:b=>le(b,p.id),onClick:()=>w&&T===null&&ue(p.id),style:{minHeight:"3rem",minWidth:"4rem",verticalAlign:"middle",display:"inline-flex"},children:w&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-2xl font-semibold leading-none",children:w}),T===null&&e.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs font-bold opacity-70 hover:opacity-100 transition-opacity cursor-pointer",children:"×"})]})},p.id))}}),r},je=(t,s)=>{var g;return e.jsx("div",{className:"inline-block",children:e.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${((g=t[0])==null?void 0:g.length)||0}, 3rem)`},children:t.flat().map(r=>{if(r.kind==="empty")return e.jsx("div",{className:"w-12 h-12"},r.id);if(r.kind==="fixed")return e.jsx("div",{className:`w-12 h-12 rounded-md border flex items-center justify-center text-xl font-semibold ${r.type==="equals"?"bg-slate-100 border-slate-300":"bg-gray-100 border-gray-300"}`,children:r.value},r.id);const l=k[r.id],v=r.type==="operator";return e.jsx("div",{ref:p=>{_.current[r.id]=p},"data-drop-zone":r.id,"data-blank-type":r.type,onDragOver:X,onDrop:p=>le(p,r.id),onClick:()=>l&&T===null&&ue(r.id),className:`w-12 h-12 rounded-md border-2 border-dashed flex items-center justify-center transition-all touch-drop-zone ${l?T==="correct"?"bg-green-100 border-green-400":T==="incorrect"?"bg-red-100 border-red-400":v?"bg-orange-100 border-orange-400 cursor-pointer":"bg-blue-100 border-blue-400 cursor-pointer":v?"border-orange-400 bg-orange-50":"border-gray-400 bg-gray-50"}`,children:l&&e.jsx("span",{className:"text-2xl font-semibold leading-none",children:l})},r.id)})})})},Ne=t=>{const s=Math.floor(t/60),g=t%60;return`${s}:${g.toString().padStart(2,"0")}`},me=()=>{C(0),h([]),M({}),n(null),z(!1),U(0),ne(),se(0);const t=o.themeId.split(",").map(r=>r.trim()),g=Array.from({length:8},()=>be(t,o.difficultyId));j(g)};if(m.length===0)return e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("h2",{className:"text-xl font-medium",children:"Зареждане на играта..."})});if(L)return e.jsx(Ce,{onReset:me});if(I){const t=m.length-q,s=localStorage.getItem("currentPlayerName")||"Играч";return e.jsx("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto py-12",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 text-center max-w-md w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Ee,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsxs("h2",{className:"text-3xl font-bold text-green-600 mb-2",children:["Браво, ",s,"!"]}),e.jsxs("p",{className:"text-lg text-gray-700 mb-4",children:["Завърши всички ",m.length," задачи!"]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Време:"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:Ne(O)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Резултат:"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[q,"/",m.length]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-green-600",children:"Верни:"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:q})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-red-600",children:"Грешни:"}),e.jsx("div",{className:"text-lg font-bold text-red-600",children:t})]})]})]})]}),e.jsxs(ae,{onClick:()=>y("/"),variant:"outline",className:"w-full",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Към началото"]})]})})}const R=m[D];if(!R)return console.log("No current problem found, index:",D,"problems length:",m.length),e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("h2",{className:"text-xl font-medium",children:"Зареждане резултата..."})});const we=R.blanks.every(t=>k[t.id]);return e.jsxs("div",{ref:re,className:"flex w-full gap-4 items-start -mx-4",style:{touchAction:"none"},children:[e.jsx("style",{children:`
        .touch-drop-zone.touch-hover {
          background-color: rgb(219 234 254) !important;
          border-color: rgb(59 130 246) !important;
          transform: scale(1.05);
        }
        
        .touch-drop-zone.touch-hover-operator {
          background-color: rgb(254 215 170) !important;
          border-color: rgb(251 146 60) !important;
          transform: scale(1.05);
        }
        
        .touch-drop-zone.drop-success {
          background-color: rgb(187 247 208) !important;
          border-color: rgb(34 197 94) !important;
          animation: pulse 0.3s ease-in-out;
        }
        
        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.1); }
        }
        
        .drag-item-touch {
          user-select: none;
          -webkit-user-select: none;
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: transparent;
        }
      `}),e.jsx("aside",{className:"w-[220px] shrink-0 pl-4",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-4 mb-4",children:e.jsx(Ue,{seconds:O,hasStarted:K})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-6 mb-4",children:e.jsxs("div",{className:"space-y-4 text-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Задача"}),e.jsxs("span",{className:"font-semibold",children:[D+1,"/",m.length]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Верни"}),e.jsx("span",{className:"font-semibold",children:q})]}),c&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Играч"}),e.jsx("span",{className:"font-semibold",children:((he=c.players[P])==null?void 0:he.name)||"Играч"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-3 space-y-2",children:[we&&T===null&&e.jsxs(ae,{onClick:ve,className:"w-full flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),"Провери"]}),e.jsxs(ae,{variant:"outline",onClick:me,className:"w-full",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Започни отначало"]})]})]})}),e.jsx("div",{className:"flex-1 flex flex-col items-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 w-full mb-6",children:[e.jsx("div",{className:"text-3xl font-bold text-center mb-8 leading-relaxed flex items-center justify-center",children:R.mode==="grid"&&R.grid?je(R.grid,R.blanks):ye(R.equation||"",R.blanks)}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2 text-center font-medium",children:"Числа:"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:E.filter(t=>!isNaN(Number(t.value))).map(t=>e.jsx("div",{draggable:!t.isUsed,onDragStart:s=>V(s,t.id),onTouchStart:s=>oe(s,t.id),onTouchMove:ie,onTouchEnd:ce,className:`px-6 py-4 text-2xl font-semibold rounded-lg border-2 transition-all select-none drag-item-touch ${t.isUsed?"bg-gray-200 border-gray-300 text-gray-500 cursor-not-allowed opacity-50":N.draggedItemId===t.id?"bg-blue-200 border-blue-400 shadow-xl":"bg-white border-gray-300 cursor-move active:scale-105"}`,style:{minHeight:"4rem",minWidth:"4rem",touchAction:"none"},children:t.value},t.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2 text-center font-medium",children:"Операции:"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:E.filter(t=>isNaN(Number(t.value))).map(t=>e.jsx("div",{draggable:!t.isUsed,onDragStart:s=>V(s,t.id),onTouchStart:s=>oe(s,t.id),onTouchMove:ie,onTouchEnd:ce,className:`px-6 py-4 text-2xl font-semibold rounded-lg border-2 transition-all select-none drag-item-touch ${t.isUsed?"bg-gray-200 border-gray-300 text-gray-500 cursor-not-allowed opacity-50":N.draggedItemId===t.id?"bg-orange-200 border-orange-400 shadow-xl":"bg-orange-50 border-orange-300 cursor-move active:scale-105"}`,style:{minHeight:"4rem",minWidth:"4rem",touchAction:"none"},children:t.value},t.id))})]}),T&&e.jsx("div",{className:`mt-6 p-4 rounded-md text-white text-center ${T==="correct"?"bg-green-500":"bg-red-500"}`,children:T==="correct"?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(ge,{className:"w-6 h-6 mr-2"}),"Правилно!"]}):e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(De,{className:"w-6 h-6 mr-2"}),R.mode==="grid"?"Грешно! Попълнете правилно всички клетки.":`Грешно! Правилният отговор е ${R.correctAnswer}.`]})})]})})]})};export{qe as M};
